(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=a(n);fetch(n.href,c)}})();const ee=document.querySelector('[data-js="recent-wins"]'),g=ee.children;let y=0;function B(e){for(let t=0;t<g.length;t++){const a=g[t];a.style.transition="opacity 0.4s ease, transform 0.4s ease",t===e?(a.style.opacity="1",a.style.pointerEvents="auto",a.style.transform="translateX(0)"):(a.style.opacity="0",a.style.pointerEvents="none",a.style.transform="translateX(-10px)")}}B(y);setInterval(()=>{y=(y+1)%g.length,B(y)},3e3);const _={cashback:3250,stars:0},te={iphone:{cost:5,label:"IPhone 15 Pro Max",deadline:"2026-02-25T12:00:00"},airpods:{cost:3,label:"Apple Airpods Max",deadline:"2026-02-22T12:00:00"},money:{cost:2,label:"50 000 ₽",deadline:"2026-02-22T12:00:00"},steamdeck:{cost:4,label:"Steam Deck OLED",deadline:"2026-03-05T12:00:00"},alisa:{cost:1,label:"Яндекс Станция Миди",deadline:"2026-03-05T12:00:00"}};function m(){return Number(localStorage.getItem("balance_cashback")??_.cashback)}function v(){return Number(localStorage.getItem("balance_stars")??_.stars)}function $(e){localStorage.setItem("balance_cashback",e),w()}function ae(e){localStorage.setItem("balance_stars",e),w()}function se(){localStorage.removeItem("balance_cashback"),localStorage.removeItem("balance_stars"),Object.keys(te).forEach(e=>{localStorage.removeItem(`giveaway_places_${e}`)}),location.reload()}function ne(){const e=document.createElement("button");e.textContent="Reset",e.style.cssText="position:fixed;bottom:12px;right:12px;z-index:9999;padding:6px 14px;border-radius:10px;background:#ff3b30;color:#fff;font-size:12px;font-weight:700;border:none;cursor:pointer;opacity:0.7;font-family:system-ui",e.addEventListener("click",se),document.body.appendChild(e)}function w(){document.querySelectorAll('[data-js="balance-cashback-value"]').forEach(e=>{e.textContent=m()}),document.querySelectorAll('[data-js="balance-stars-value"]').forEach(e=>{e.textContent=v()}),document.querySelectorAll('[data-js="balance-star-value"]').forEach(e=>{e.textContent=v()})}const R=[{type:"cashback",value:25,image:"public/prizes/Cashback/25.png",label:"25 баллов"},{type:"stars",value:1,image:"public/prizes/Stars/star1.png",label:"1 звезда"},{type:"cashback",value:100,image:"public/prizes/Cashback/100.png",label:"100 баллов"},{type:"category",value:0,image:"public/prizes/Category/cinema.png",label:"Кино",desc:"Дополнительный кешбэк 20% на кино в марте"},{type:"cashback",value:200,image:"public/prizes/Cashback/200.png",label:"200 баллов"},{type:"stars",value:3,image:"public/prizes/Stars/star3.png",label:"3 звезды"},{type:"item",value:0,image:"public/prizes/Items/iphone.png",label:"iPhone"},{type:"stars",value:5,image:"public/prizes/Stars/star5.png",label:"5 звёзд"}];function oe(e){switch(e.type){case"stars":return"Звезда для участия в розыгрыше. Призы уже ждут тебя";case"cashback":return`${e.value} баллов кешбэка`;case"item":return"Бесплатно закажите этот товар в МТС Shop";case"category":return e.desc;default:return""}}let S=50;const b=200,j=130,ce=12,D=b/2+ce+j/2,x=document.querySelector('[data-js="carousel"]');function le(){x.innerHTML="",R.forEach(e=>{const t=document.createElement("div");t.className="carousel-item rounded-4xl overflow-hidden flex items-center justify-center";const a=document.createElement("img");a.src=e.image,a.alt=e.label,a.className="w-full h-full object-contain",a.draggable=!1,t.appendChild(a),x.appendChild(t)})}le();const I=x.querySelectorAll(".carousel-item"),o=I.length,re=document.querySelector('[data-js="gama-controls-button"]'),ie=document.querySelector('[data-js="gama-controls-button-price"]'),G=document.querySelectorAll('[data-js="price-btn"]'),i=document.querySelector('[data-js="gama-controls"]'),d=document.querySelector('[data-js="badge-prizes"]'),u=document.querySelector('[data-js="win-controls"]'),de=document.querySelector('[data-js="play-again-button"]'),W=document.querySelector('[data-js="pointer"]'),E=document.querySelector('[data-js="prize-description"]'),A=document.querySelector('[data-js="to-raffles-button"]'),z=document.querySelector('[data-js="to-raffles-label"]'),F=document.querySelector('[data-js="nav"]'),H=document.getElementById("small-rays"),V=document.getElementById("big-rays");let l=0,h=!1,L=null;function ue(){i.style.transition="opacity 0.3s ease-in-out",d.style.transition="opacity 0.3s ease-in-out",u.style.transition="opacity 0.3s ease-in-out",i.classList.remove("disappear"),d.classList.remove("disappear"),u.classList.add("disappear"),E.classList.add("disappear"),F.classList.remove("disappear"),H.style.opacity="1",V.style.opacity="0"}function pe(){i.style.transition="opacity 0.3s ease-in-out",u.style.transition="opacity 0.3s ease-in-out",i.classList.add("disappear"),d.classList.add("disappear"),F.classList.add("disappear"),W.classList.remove("disappear")}function fe(e){i.style.transition="opacity 0.3s ease-in-out",d.style.transition="opacity 0.3s ease-in-out",u.style.transition="opacity 0.3s ease-in-out",u.classList.remove("disappear"),W.classList.add("disappear"),E.textContent=oe(e),E.classList.remove("disappear"),e.type==="item"?(z.textContent="в МТС Shop",A.href="#"):(z.textContent="к розыгрышам",A.href="/giveaways.html"),H.style.opacity="0",V.style.opacity="1"}function T(e,t){let a=e-t;const s=Math.floor(o/2);return a>s&&(a-=o),a<-s&&(a+=o),a}function N(e,t){const a=t===0,s=a?b:j;e.style.width=`${s}px`,e.style.height=`${s}px`,e.style.transform=`translate(calc(-50% + ${t*D}px), -50%)`,e.style.zIndex=a?2:1,e.style.opacity=Math.abs(t)>1?0:1}function q(e){I.forEach((t,a)=>{t.style.transition="";const s=T(a,l);if(e!==void 0){const n=T(a,e);Math.abs(s-n)>1&&(t.style.transition="none",N(t,s>0?s+1:s-1),t.offsetHeight,t.style.transition="")}N(t,s)})}function ye(){const e=l;l=(l+1)%o,q(e)}function Z(){q(),L=setInterval(ye,2e3)}function me(){clearInterval(L),L=null}function be(e,t){const a=(t%o+o)%o;let s=e-a;return s>o/2&&(s-=o),s<-o/2&&(s+=o),s}function he(e){const t=Math.min(Math.abs(e),1);return b+(j-b)*t}function ge(e){I.forEach((t,a)=>{const s=be(a,e),n=he(s);t.style.transition="none",t.style.width=`${n}px`,t.style.height=`${n}px`,t.style.transform=`translate(calc(-50% + ${s*D}px), -50%)`,t.style.zIndex=Math.round(100-Math.abs(s)*10),t.style.opacity=Math.abs(s)>1.5?0:1})}function ve(e){if(e<.15){const a=e/.15;return .08*a*a}const t=(e-.15)/.85;return .08+.92*(1-Math.pow(1-t,4))}function Se(e){e.type==="cashback"?$(m()+e.value):e.type==="stars"&&ae(v()+e.value),we(e)}function xe(){if(h||m()<S)return;h=!0,$(m()-S),me(),pe();const e=Math.floor(Math.random()*o),t=5+Math.floor(Math.random()*2);let a=e-l;a<=0&&(a+=o);const s=t*o+a,n=l,c=8e3,r=performance.now();function C(Q){const P=Math.min((Q-r)/c,1);if(ge(n+s*ve(P)),P<1)requestAnimationFrame(C);else{l=e,h=!1,q();const M=R[e];Se(M),fe(M)}}requestAnimationFrame(C)}function Ee(){ue(),Z()}const Le={50:{accent:"#64aaca",shadow:"#8dd1ff",linktodocs:"#0070E5"},100:{accent:"#6564ca",shadow:"#c48dff",linktodocs:"#45b6fc"},500:{accent:"#a364ca",shadow:"#ff8df2",linktodocs:"#45b6fc"}};function J(e){const t=Le[e];t&&(S=e,document.documentElement.style.setProperty("--accent",t.accent),document.documentElement.style.setProperty("--shadow",t.shadow),document.documentElement.style.setProperty("--linktodocs",t.linktodocs),G.forEach(a=>{a.classList.toggle("active",a.dataset.price===String(e))}),ie.textContent=e)}function X(){try{return JSON.parse(localStorage.getItem("wonPrizes")||"[]")}catch{return[]}}function we(e){const t=X();t.push({image:e.image,label:e.label,type:e.type,value:e.value}),localStorage.setItem("wonPrizes",JSON.stringify(t))}function je(){const e=document.querySelector('[data-js="won-list"]'),t=document.querySelector('[data-js="won-empty"]'),a=X();if(e.innerHTML="",a.length===0){t.classList.remove("hidden");return}t.classList.add("hidden"),a.forEach(s=>{const n=document.createElement("div");n.className="w-[156px] h-[136px] lowerbg rounded-[20px] px-[16px] py-[8px] flex flex-col justify-between items-center",n.innerHTML=`<img class="w-[80px] h-[80px] object-contain" src="${s.image}" alt=""><p class="c1-medium-comp leading-[14px] text-center">${s.label}</p>`,e.appendChild(n)})}const Ie=document.querySelectorAll('[data-js="tab-btn"]'),O=document.querySelector('[data-js="tab-bg"]'),p=document.querySelector('[data-js="tab-available"]'),f=document.querySelector('[data-js="tab-won"]');function K(e){e==="available"?(O.style.left="4px",p.classList.remove("hidden"),p.style.display="flex",f.classList.add("hidden"),f.style.display=""):(O.style.left="calc(50%)",p.classList.add("hidden"),p.style.display="",f.classList.remove("hidden"),f.style.display="flex",je())}Ie.forEach(e=>{e.addEventListener("click",()=>K(e.dataset.tab))});const k=document.querySelector('[data-js="overlay"]'),U=document.querySelector('[data-js="prizes-modal"]'),qe=document.querySelector('[data-js="close-modal"]');function ke(){K("available"),k.classList.remove("hidden"),U.style.top="52px"}function Y(){U.style.top="100%",k.classList.add("hidden")}d.addEventListener("click",ke);k.addEventListener("click",Y);qe.addEventListener("click",Y);J(50);w();ne();Z();re.addEventListener("click",xe);de.addEventListener("click",Ee);G.forEach(e=>{e.addEventListener("click",()=>J(Number(e.dataset.price)))});
