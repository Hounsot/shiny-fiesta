import{u as U,i as Y,g as h,s as A,a as tt,b as et}from"./balance-DZw02NgI.js";const st=document.querySelector('[data-js="recent-wins"]'),g=st.children;let y=0;function B(t){for(let e=0;e<g.length;e++){const s=g[e];s.style.transition="opacity 0.4s ease, transform 0.4s ease",e===t?(s.style.opacity="1",s.style.pointerEvents="auto",s.style.transform="translateX(0)"):(s.style.opacity="0",s.style.pointerEvents="none",s.style.transform="translateX(-10px)")}}B(y);setInterval(()=>{y=(y+1)%g.length,B(y)},3e3);const c="/shiny-fiesta/",R=[{type:"cashback",value:25,image:`${c}Prizes/Cashback/25.png`,label:"25 баллов"},{type:"stars",value:1,image:`${c}Prizes/Stars/star1.png`,label:"1 звезда"},{type:"cashback",value:100,image:`${c}Prizes/Cashback/100.png`,label:"100 баллов"},{type:"category",value:0,image:`${c}Prizes/Category/cinema.png`,label:"Кино",desc:"Дополнительный кешбэк 20% на кино в марте"},{type:"cashback",value:200,image:`${c}Prizes/Cashback/200.png`,label:"200 баллов"},{type:"stars",value:3,image:`${c}Prizes/Stars/star3.png`,label:"3 звезды"},{type:"item",value:0,image:`${c}Prizes/Items/iphone.png`,label:"iPhone"},{type:"stars",value:5,image:`${c}Prizes/Stars/star5.png`,label:"5 звёзд"}];function at(t){switch(t.type){case"stars":return"Звезда для участия в розыгрыше. Призы уже ждут тебя";case"cashback":return`${t.value} баллов кешбэка`;case"item":return"Бесплатно закажите этот товар в МТС Shop";case"category":return t.desc;default:return""}}let b=50;const f=200,L=130,nt=12,T=f/2+nt+L/2,v=document.querySelector('[data-js="carousel"]');function ot(){v.innerHTML="",R.forEach(t=>{const e=document.createElement("div");e.className="carousel-item rounded-4xl overflow-hidden flex items-center justify-center";const s=document.createElement("img");s.src=t.image,s.alt=t.label,s.className="w-full h-full object-contain",s.draggable=!1,e.appendChild(s),v.appendChild(e)})}ot();const w=v.querySelectorAll(".carousel-item"),n=w.length,ct=document.querySelector('[data-js="gama-controls-button"]'),lt=document.querySelector('[data-js="gama-controls-button-price"]'),N=document.querySelectorAll('[data-js="price-btn"]'),i=document.querySelector('[data-js="gama-controls"]'),r=document.querySelector('[data-js="badge-prizes"]'),d=document.querySelector('[data-js="win-controls"]'),it=document.querySelector('[data-js="play-again-button"]'),D=document.querySelector('[data-js="pointer"]'),S=document.querySelector('[data-js="prize-description"]'),C=document.querySelector('[data-js="to-raffles-button"]'),M=document.querySelector('[data-js="to-raffles-label"]'),G=document.querySelector('[data-js="nav"]'),W=document.getElementById("small-rays"),H=document.getElementById("big-rays");let l=0,m=!1,E=null;function rt(){i.style.transition="opacity 0.3s ease-in-out",r.style.transition="opacity 0.3s ease-in-out",d.style.transition="opacity 0.3s ease-in-out",i.classList.remove("disappear"),r.classList.remove("disappear"),d.classList.add("disappear"),S.classList.add("disappear"),G.classList.remove("disappear"),W.style.opacity="1",H.style.opacity="0"}function dt(){i.style.transition="opacity 0.3s ease-in-out",d.style.transition="opacity 0.3s ease-in-out",i.classList.add("disappear"),r.classList.add("disappear"),G.classList.add("disappear"),D.classList.remove("disappear")}function ut(t){i.style.transition="opacity 0.3s ease-in-out",r.style.transition="opacity 0.3s ease-in-out",d.style.transition="opacity 0.3s ease-in-out",d.classList.remove("disappear"),D.classList.add("disappear"),S.textContent=at(t),S.classList.remove("disappear"),t.type==="item"?(M.textContent="в МТС Shop",C.href="#"):(M.textContent="к розыгрышам",C.href="giveaways.html"),W.style.opacity="0",H.style.opacity="1"}function I(t,e){let s=t-e;const a=Math.floor(n/2);return s>a&&(s-=n),s<-a&&(s+=n),s}function z(t,e){const s=e===0,a=s?f:L;t.style.width=`${a}px`,t.style.height=`${a}px`,t.style.transform=`translate(calc(-50% + ${e*T}px), -50%)`,t.style.zIndex=s?2:1,t.style.opacity=Math.abs(e)>1?0:1}function x(t){w.forEach((e,s)=>{e.style.transition="";const a=I(s,l);if(t!==void 0){const o=I(s,t);Math.abs(a-o)>1&&(e.style.transition="none",z(e,a>0?a+1:a-1),e.offsetHeight,e.style.transition="")}z(e,a)})}function pt(){const t=l;l=(l+1)%n,x(t)}function O(){x(),E=setInterval(pt,2e3)}function yt(){clearInterval(E),E=null}function ft(t,e){const s=(e%n+n)%n;let a=t-s;return a>n/2&&(a-=n),a<-n/2&&(a+=n),a}function mt(t){const e=Math.min(Math.abs(t),1);return f+(L-f)*e}function ht(t){w.forEach((e,s)=>{const a=ft(s,t),o=mt(a);e.style.transition="none",e.style.width=`${o}px`,e.style.height=`${o}px`,e.style.transform=`translate(calc(-50% + ${a*T}px), -50%)`,e.style.zIndex=Math.round(100-Math.abs(a)*10),e.style.opacity=Math.abs(a)>1.5?0:1})}function gt(t){if(t<.15){const s=t/.15;return .08*s*s}const e=(t-.15)/.85;return .08+.92*(1-Math.pow(1-e,4))}function bt(t){t.type==="cashback"?A(h()+t.value):t.type==="stars"&&tt(et()+t.value),Lt(t)}function vt(){if(m||h()<b)return;m=!0,A(h()-b),yt(),dt();const t=Math.floor(Math.random()*n),e=5+Math.floor(Math.random()*2);let s=t-l;s<=0&&(s+=n);const a=e*n+s,o=l,_=8e3,K=performance.now();function P(Q){const q=Math.min((Q-K)/_,1);if(ht(o+a*gt(q)),q<1)requestAnimationFrame(P);else{l=t,m=!1,x();const k=R[t];bt(k),ut(k)}}requestAnimationFrame(P)}function St(){rt(),O()}const Et={50:{accent:"#64aaca",shadow:"#8dd1ff",linktodocs:"#0070E5"},100:{accent:"#6564ca",shadow:"#c48dff",linktodocs:"#45b6fc"},500:{accent:"#a364ca",shadow:"#ff8df2",linktodocs:"#45b6fc"}};function Z(t){const e=Et[t];e&&(b=t,document.documentElement.style.setProperty("--accent",e.accent),document.documentElement.style.setProperty("--shadow",e.shadow),document.documentElement.style.setProperty("--linktodocs",e.linktodocs),N.forEach(s=>{s.classList.toggle("active",s.dataset.price===String(t))}),lt.textContent=t)}function F(){try{return JSON.parse(localStorage.getItem("wonPrizes")||"[]")}catch{return[]}}function Lt(t){const e=F();e.push({image:t.image,label:t.label,type:t.type,value:t.value}),localStorage.setItem("wonPrizes",JSON.stringify(e))}function wt(){const t=document.querySelector('[data-js="won-list"]'),e=document.querySelector('[data-js="won-empty"]'),s=F();if(t.innerHTML="",s.length===0){e.classList.remove("hidden");return}e.classList.add("hidden"),s.forEach(a=>{const o=document.createElement("div");o.className="w-[156px] h-[136px] lowerbg rounded-[20px] px-[16px] py-[8px] flex flex-col justify-between items-center",o.innerHTML=`<img class="w-[80px] h-[80px] object-contain" src="${a.image}" alt=""><p class="c1-medium-comp leading-[14px] text-center">${a.label}</p>`,t.appendChild(o)})}const xt=document.querySelectorAll('[data-js="tab-btn"]'),$=document.querySelector('[data-js="tab-bg"]'),u=document.querySelector('[data-js="tab-available"]'),p=document.querySelector('[data-js="tab-won"]');function J(t){t==="available"?($.style.left="4px",u.classList.remove("hidden"),u.style.display="flex",p.classList.add("hidden"),p.style.display=""):($.style.left="calc(50%)",u.classList.add("hidden"),u.style.display="",p.classList.remove("hidden"),p.style.display="flex",wt())}xt.forEach(t=>{t.addEventListener("click",()=>J(t.dataset.tab))});const j=document.querySelector('[data-js="overlay"]'),V=document.querySelector('[data-js="prizes-modal"]'),jt=document.querySelector('[data-js="close-modal"]');function Pt(){J("available"),j.classList.remove("hidden"),V.style.top="52px"}function X(){V.style.top="100%",j.classList.add("hidden")}r.addEventListener("click",Pt);j.addEventListener("click",X);jt.addEventListener("click",X);Z(50);U();Y();O();ct.addEventListener("click",vt);it.addEventListener("click",St);N.forEach(t=>{t.addEventListener("click",()=>Z(Number(t.dataset.price)))});
